<!DOCTYPE html>
<html>
<head>
	<title>Indianapolis Java User Group</title>

</head>
<body>

	<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.2/handlebars.min.js"></script>
	<script src="js/markdown.js"></script>
	<script id="entry-template" type="text/x-handlebars-template">
	  <div class="entry">
	    <h1>{{title}}</h1>
	    <div id="main" class="body"></div>
	  </div>
	</script>
	<script>
	$(function() {
		var source = $("#entry-template").html(),
		    template = Handlebars.compile(source),
		    context = {title: "Indianapolis Java User Group"},
		    loadUrl = function(url) {
				var $main = $("#main");
				$.get(url, function( data ) {
					if(url.endsWith(".md")) {
						$main.html( markdown.toHTML(data) );
					} else {
						$main.html( data );
					}
					window.scrollTo(0,0);
				}, "html");
			};
		
		//Ajaxify all links
		if(!!(window.history && history.pushState)) {
			$(document).on("click", "a, area", function() {
				var href = $(this).attr("href"),
				    host = location.href.match(/\/\/[^\/]+/)[0];

				//Remote URLs
				if(href.startsWith("http") && !href.includes(host)) {
					return true;
				}
				//Local URLs
				history.pushState({}, '', href);
				loadUrl(href);
				return false;
			});
			$(window).on("popstate", function() {
				loadUrl(location.href);
			});
		}

		//Load Template
		$("body").append( template(context) );
		//Load first page
		loadUrl("test.md");
	});
	</script>
</body>
</html>

